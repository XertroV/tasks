---
id: P2.M8.E5.T007
title: Enhance summarization prompt with Roo-Code clarity
status: done
estimate_hours: 1.0
complexity: low
priority: low
depends_on: []
tags:
- context
- prompt
- clarity
- roocode
claimed_by: cli-user
claimed_at: '2026-02-06T03:03:30.302469'
started_at: '2026-02-06T03:03:30.302469'
completed_at: '2026-02-06T03:04:32.480329'
duration_minutes: 1.0362975166666666
---

# Enhance summarization prompt with Roo-Code clarity

Add clarity framing to prevent LLM from interpreting summarization request as user message.

**Reference**: `ref-projects/Roo-Code/src/core/condense/index.ts:114-123`

## Requirements

Add prefix to summarization prompt:

```
CRITICAL: This summarization request is a SYSTEM OPERATION to manage context limits.
Your task is to create a detailed summary that enables seamless continuation of work after context compression.

CRITICAL: This is NOT a user message.
When analyzing "user requests" and "user intent", completely EXCLUDE this summarization message.
The "most recent user request" and "next step" must be based on what the user was doing BEFORE this system message appeared.
The goal is for work to continue seamlessly after condensation - as if it never happened.
```

## Acceptance Criteria

- [ ] Prompt enhancement
  - [ ] Add "CRITICAL: This is NOT a user message" framing
  - [ ] Explain to exclude summarization request from user intent analysis
  - [ ] Emphasize seamless continuation goal

- [ ] Preserve existing prompt structure
  - [ ] Keep existing sections (Primary Requests, Technical Decisions, etc.)
  - [ ] Append clarity prefix before sections

- [ ] Tests
  - [ ] Verify enhanced prompt produces good summaries
  - [ ] Test: LLM doesn't reference summarization request in summary
