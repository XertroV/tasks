---
id: P22.M1.E4.T001
title: 'Unit tests: CredentialSelector ordering and cooldown filtering'
status: done
estimate_hours: 1.0
complexity: low
priority: medium
depends_on:
- P22.M1.E2.T001
tags: []
claimed_by: cli-user
claimed_at: '2026-02-18T17:37:45.607151+00:00'
started_at: '2026-02-18T17:37:45.607151+00:00'
completed_at: '2026-02-18T17:45:22.519063+00:00'
duration_minutes: 7.6151984
---
Write ExUnit tests for CredentialSelector.get_active_credentials/1: - Returns credentials sorted by priority ASC - Excludes credentials with future cooldown_until - Excludes credentials with status != :active (when cooldown has not expired) - Returns empty list when provider has no credentials - Returns all active credentials when cooldown_until is nil or past Acceptance criteria: - All tests use async: true with DataCase - No global state mutations without cleanup