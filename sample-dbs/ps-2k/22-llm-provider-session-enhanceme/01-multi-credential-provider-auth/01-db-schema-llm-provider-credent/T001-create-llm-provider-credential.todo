---
id: P22.M1.E1.T001
title: Create llm_provider_credentials Ecto schema and migration
status: done
estimate_hours: 2.0
complexity: medium
priority: medium
depends_on: []
tags: []
claimed_by: cli-user
claimed_at: '2026-02-18T14:41:22.806395+00:00'
started_at: '2026-02-18T14:41:22.806395+00:00'
completed_at: '2026-02-18T14:53:02.802376+00:00'
duration_minutes: 11.666599433333333
---
Create a new Ecto schema LlmProviderCredential with fields: provider_id (FK to llm_providers), api_key_encrypted (AES-256-GCM via EncryptedString), label (string), priority (integer, lower = higher priority), status (enum: active/rate_limited/failed), cooldown_until (utc_datetime), inserted_at, updated_at. Add index on (provider_id, priority). Migration should be reversible. Acceptance criteria: - Migration runs cleanly with mix ecto.migrate/rollback - Schema has changeset validations for required fields - Status field uses Ecto.Enum with :active/:rate_limited/:failed values - provider_id has FK constraint to llm_providers table