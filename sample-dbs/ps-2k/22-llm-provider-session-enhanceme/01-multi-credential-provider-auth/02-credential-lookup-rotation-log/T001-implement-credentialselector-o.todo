---
id: P22.M1.E2.T001
title: 'Implement CredentialSelector: ordered credential list lookup per provider'
status: done
estimate_hours: 2.0
complexity: medium
priority: medium
depends_on:
- P22.M1.E1.T001
tags: []
claimed_by: cli-user
claimed_at: '2026-02-18T14:58:59.155275+00:00'
started_at: '2026-02-18T14:58:59.155275+00:00'
completed_at: '2026-02-18T15:07:17.338710+00:00'
duration_minutes: 8.303056866666667
---
Create lib/pag_server/llm/credential_selector.ex. Implement get_active_credentials/1 that returns credentials for a provider ordered by priority ASC, filtered to status=:active and (cooldown_until IS NULL OR cooldown_until < now()). Acceptance criteria: - Returns empty list when no credentials exist - Returns credentials sorted by priority - Excludes credentials where cooldown_until is in the future - Function signature: get_active_credentials(provider_id) :: [%LlmProviderCredential{}]